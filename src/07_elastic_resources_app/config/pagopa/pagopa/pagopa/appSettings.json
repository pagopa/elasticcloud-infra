{
  "id": "pagopa",
  "displayName": "pagoPA ${env}",
  "indexTemplate": {
    "indexPattern" : "logs-kubernetes.container_logs-*-${prefix}.${env}"
  },
  "dataStream": [
    "logs-kubernetes.container_logs-${prefix}.${env}"
  ],
  "dataView": {
    "indexIdentifier": "kubernetes.container_logs",
    "runtimeFields": [
      { "name": "faultCode", "runtimeField": { "type": "keyword", "script": {"source": "String message = params[\"_source\"][\"message\"];def m = /^.*title=(.*)(?=, status).*$/.matcher(message);if ( m.matches() ) {return emit(m.group(1));} else{return emit(\"-\");}"}}},
      { "name": "faultDetail", "runtimeField": { "type": "keyword", "script": {"source": "String message = params[\"_source\"][\"message\"];\n\ndef m = /^.*detail=(.*)(?=\\)).*$/.matcher(message);\nif ( m.matches() ) {\n   return emit(m.group(1));\n} else {\n   return emit(\"-\");\n}"}}}
    ]
  },
  "customComponent": "basic-pipeline@custom",
  "ingestPipeline": "convert_responseTime_httpCode_with_failure"
}
